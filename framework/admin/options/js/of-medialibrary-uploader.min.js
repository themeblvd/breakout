(function(a){optionsframeworkMLU={removeFile:function(){a(".mlu_remove").live("click",function(c){var b=a(this);b.hide();b.closest(".section-upload").find(".upload").attr("value","");b.closest(".section-upload").find(".screenshot").slideUp();b.closest(".section-upload").find(".screenshot").siblings(".of-background-properties").hide();return false});a("a.delete-inline","#option-1").hide()},recreateFileField:function(){a("input.file").each(function(){var b='<input class="upload_file_button" type="button" value="Upload" />';a(this).wrap('<div class="file_wrap" />');a(this).addClass("file").css("opacity",0);a(this).parent().append(a('<div class="fake_file" />').append(a('<input type="text" class="upload" />').attr("id",a(this).attr("id")+"_file")).val(a(this).val()).append(b));a(this).bind("change",function(){a("#"+a(this).attr("id")+"_file").val(a(this).val())});a(this).bind("mouseout",function(){a("#"+a(this).attr("id")+"_file").val(a(this).val())})})},mediaUpload:function(){jQuery.noConflict();a("input.upload_button").removeAttr("style");var b,d,c=true,e;a("input.upload_button").live("click",function(){b=a(this).closest(".section-upload").find("input.image-url").attr("id");d=a(this).attr("rel"),upload_type=a(this).attr("data-upload-type");if(upload_type=="slider"){e=setInterval(function(){jQuery("#TB_iframeContent").contents().find(".savesend .button").val("Insert into Slider");jQuery("#TB_iframeContent").contents().find(".slidetoggle tr.image_alt, .slidetoggle tr.post_excerpt, .slidetoggle tr.post_content, .slidetoggle tr.url, .slidetoggle tr.align, .slidetoggle tr.image-size").hide()},2000)}else{if(upload_type=="logo"||upload_type=="logo_2x"){e=setInterval(function(){jQuery("#TB_iframeContent").contents().find(".savesend .button").val("Use as Logo")},2000)}else{e=setInterval(function(){jQuery("#TB_iframeContent").contents().find(".savesend .button").val("Use This Image")},2000)}}var f="";if(a(this).parents(".section").find(".heading")){f=a(this).parents(".section").find(".heading").text()}tb_show(f,"media-upload.php?post_id="+d+"&themeblvd_upload_type="+upload_type+"&TB_iframe=1");return false});window.original_send_to_editor=window.send_to_editor;window.send_to_editor=function(m){if(b){if(upload_type=="slider"){var h=a(m).html(m).find("img").attr("class"),h=h.split("wp-image-"),h=h[1];a("#"+b+"_id").val(h)}clearInterval(e);if(a(m).html(m).find("img").length>0){if(upload_type=="logo"){var f=a(m).html(m).find("img").attr("width")}var j=a(m).html(m).find("img").attr("src")}else{var l=m.split("'");j=l[1];var o=l[2];o=o.replace(">","");o=o.replace("</a>","")}var i=/(^.*\.jpg|jpeg|png|gif|ico*)/gi;var n=/(^.*\.pdf|doc|docx|ppt|pptx|odt*)/gi;var k=/(^.*\.mp3|m4a|ogg|wav*)/gi;var g=/(^.*\.mp4|m4v|mov|wmv|avi|mpg|ogv|3gp|3g2*)/gi;if(j.match(i)){c='<img src="'+j+'" alt="" /><a href="#" class="mlu_remove button">Remove Image</a>'}else{m='<a href="'+j+'" target="_blank" rel="external">View File</a>';c='<div class="no_image"><span class="file_link">'+m+'</span><a href="#" class="mlu_remove button">Remove</a></div>'}a("#"+b).val(j);if(upload_type=="logo"){a("#"+b).next().val(f)}a("#"+b).siblings(".screenshot").slideDown().html(c);a("#"+b).siblings(".of-background-properties").show();tb_remove()}else{window.original_send_to_editor(m)}b=""}}};a(document).ready(function(){optionsframeworkMLU.removeFile();optionsframeworkMLU.recreateFileField();optionsframeworkMLU.mediaUpload()})})(jQuery);